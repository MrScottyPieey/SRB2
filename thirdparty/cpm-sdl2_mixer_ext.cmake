CPMAddPackage(
	NAME SDL2_mixer_ext
	GITHUB_REPOSITORY WohlSoft/SDL-Mixer-X
	GIT_TAG 2.6.0
	OPTIONS
		"DOWNLOAD_AUDIO_CODECS_DEPENDENCY ON"
		"AUDIO_CODECS_BUILD_LOCAL_SDL2 ON"
		"AUDIO_CODECS_BUILD_LOCAL_SDL2_SHARED OFF"
		"AUDIOCODECS_BUILD_EDMIDI OFF"
		"AUDIOCODECS_BUILD_LIBXMP OFF"
		"AUDIOCODECS_BUILD_OPUS OFF"
		"AUDIOCODECS_BUILD_MODPLUG OFF"
		"AUDIOCODECS_BUILD_TIMIDITYSDL OFF"
		"AUDIOCODECS_BUILD_WAVPACK OFF"
		"SDL_MIXER_X_SHARED OFF"
		"SDL_MIXER_X_STATIC ON"
		"USE_MIDI_EDMIDI OFF"
		"USE_MIDI_EDMIDI_DYNAMIC ON"
		"USE_MIDI_TIMIDITY OFF"
		"USE_MODPLUG OFF"
		"USE_MODPLUG_STATIC OFF"
		"USE_MODPLUG_DYNAMIC OFF"
		"USE_OPUS OFF"
		"USE_WAVPACK OFF"
		"USE_XMP OFF"
)
find_package(SDL2_mixer_ext REQUIRED)

#if(SDL2_mixer_ext_ADDED)
	file(GLOB SDLMixerX_HEADERS "${SDLMixerX_SOURCE_DIR}/include/*.h")

	# Create a target that copies headers at build time, when they change
	add_custom_target(SDLMixerX_copy_headers_in_build_dir
			COMMAND ${CMAKE_COMMAND} -E copy_directory "${SDLMixerX_SOURCE_DIR}/include" "${CMAKE_BINARY_DIR}/SDLHeaders/SDL2"
			DEPENDS ${SDLMixerX_HEADERS})

#endif()
